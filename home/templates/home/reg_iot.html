<!DOCTYPE html>
<html>
<head>
    <title>Add IoT Code</title>
</head>
<body>
    <h1>Add IoT Code</h1>
    <!-- Button to open the modal -->
<button id="openModalButton">Open Modal</button>

<!-- Custom Modal (Hidden by default) -->
<div class="custom-modal" id="myModal">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
            <h5 class="modal-title">Form in Modal</h5>    
            <button type="button" class="close" id="closeModal">&times;</button>
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <!-- Modal Body -->
        <div class="modal-body">
            <form method="post" action="reg_iot">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Submit</button>
            </form>

        </div>
    </div>
</div>

<!-- JavaScript to trigger the modal -->
<script>
    // Get references to the modal and open button
    var modal = document.getElementById("myModal");
    var openButton = document.getElementById("openModalButton");

    // Get a reference to the close button in the modal header
    var closeButton = modal.querySelector(".close");

    // Function to open the modal
    function openModal() {
        modal.style.display = "block";
    }

    // Function to close the modal
    function closeModal() {
        modal.style.display = "none";
    }

    // Event listener for the open button
    openButton.addEventListener("click", openModal);

    // Event listener for the close button in the modal header
    closeButton.addEventListener("click", closeModal);

    // Close the modal if the user clicks outside of it
    window.addEventListener("click", function (event) {
        if (event.target === modal) {
            closeModal();
        }
    });
</script>

</body>
</html>
